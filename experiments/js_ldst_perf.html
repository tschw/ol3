<!doctype html>
<html>
    <head>
        <title>Locals, Typed Arrays, JS Arrays, Load/Store Performance Test</title>

        <script type="text/javascript">

            function onLoad() {
                var resultLog = [ ];

                var startTime = Date.now();
                var sum = 0;
                for (var i = 0; i < 1000; ++i) {
                    for (var j = 0; j < 1000; ++j) {

                        sum += Math.sqrt(i*i + j*j);
                    }
                }
                resultLog.push('Test w local scope variables, got sum ' + sum + ' time: ' + (Date.now() - startTime));

                startTime = Date.now();
                var arr = new Uint32Array(2);
                var arr2 = new Float32Array(1);
                arr2[0] = 0;
                for (arr[0] = 0; arr[0] < 1000; ++arr[0]) {
                    for (arr[1] = 0; arr[1] < 1000; ++arr[1]) {
                        arr2[0] += Math.sqrt(arr[0]*arr[0] + arr[1]*arr[1]);
                    }
                }
                resultLog.push('Test w typed arrays, got sum ' + arr2[0] + ' time: ' + (Date.now() - startTime));
                document.getElementById('results').innerHTML = resultLog.join('<br/>\n');

                startTime = Date.now();
                arr = [0,0];
                arr2 = [0];
                arr2[0] = 0;
                for (arr[0] = 0; arr[0] < 1000; ++arr[0]) {
                    for (arr[1] = 0; arr[1] < 1000; ++arr[1]) {
                        arr2[0] += Math.sqrt(arr[0]*arr[0] + arr[1]*arr[1]);
                    }
                }
                resultLog.push('Test w js arrays, got sum ' + arr2[0] + ' time: ' + (Date.now() - startTime));
                document.getElementById('results').innerHTML = resultLog.join('<br/>\n');
            }

        </script>
    </head>
    <body onload="javascript: onLoad();" >
        <div id="results">
            Test running...
        </div>
    </body>
</html>
